{% extends 'base.html' %}
{% block title %}  My courses  {% endblock %}
  {% block content %}
  <div class="container my-5 py-3 bg-secondary">
    {% if messages %}
      {% for message in messages %}
      <div class="alert alert-warning alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      {% endfor %}
    {% endif %}
    <a class="text-white bg-primary p-2" href="{% url 'admin-dashboard' %}">My homepage</a>
    <h2 class="text-center">
      {% if profile.user.first_name %}
        Hi, {{ profile.user.first_name|capfirst }} {{ profile.user.last_name|capfirst }} !
      {% else %}
        Hi, {{ profile.user.username|capfirst }}
      {% endif %}
    </h2>
    <p>Courses you have registered for</p>
    <table class="table table-dark">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Course Code</th>
          <th scope="col"> Course name </th>
          <th scope="col">Department</th>
          <th scope="col">Year</th>
          <th scope="col">Semester</th>
          <th scope="col">Teacher</th>
          <th scope="col">View result</th>
        </tr>
      </thead>
      <tbody>
        {% for course in courses %}
          <tr>
            <th scope="row">{{ forloop.counter }}</th>
            <td><a style="color: rgb(15, 48, 231);" class="nav-link" href="{% url 'course-detail' course_code=course.course_code %}">{{ course.course_code }}</a></td>
            <td>{{ course.name }}</td>
            <td>{{ course.department.name }}</td>
            <td>{{ course.academic_year }}</td>
            <td> {{ course.semester }} </td>
            <td>
              {% for teacher in course.teachers.all %}
                {{ teacher.user.username }}{% if not forloop.last %}, {% endif %}
              {% endfor %}
            </td>
            <td>
              <a class="nav-link" style="color: rgb(15, 48, 231);" href="{% url 'view-result' course_code=course.course_code %}">View result</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endblock %}
